<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Detalhes do Profissional - FacilitaA√≠</title>
  <link rel="stylesheet" href="/style/style.css" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <script src="https://unpkg.com/lucide@latest"></script>
</head>
<body class="home-body">

  <!-- Cabe√ßalho -->
  <header class="top-bar">
  <div class="logo">
    üõ†Ô∏è <span>FacilitaA√≠</span>
  </div>

  <div class="perfil-area">
    <div class="perfil" id="perfil-toggle">
      <i data-lucide="user"></i>
      <span><%= cliente.nome %></span>
      <i data-lucide="chevron-down" class="seta"></i>
    </div>

    <div class="dropdown" id="perfil-dropdown">
      <a href="/meus-servicos">Meus Servi√ßos</a>
      <a href="/logout">Sair</a>
    </div>
  </div>
</header>

  <!-- Conte√∫do principal -->
  <main class="content detalhe-profissional">
    <div class="profissional-card">
      <img src="<%= profissional.imagem %>" alt="<%= profissional.nome %>">
      <div class="info">
        <h2><%= profissional.nome %></h2>
        <p class="categoria"><%= profissional.categoria %></p>
        <p><%= profissional.descricao %></p>
        <p class="detalhe">üìç <%= profissional.distancia %></p>
        <p class="detalhe">‚≠ê <%= profissional.estrelas %> avalia√ß√µes</p>
        <p class="detalhe">üí∞ Pre√ßo m√©dio: <%= profissional.preco %></p>

        <form action="/contratar/<%= profissional.id %>" method="POST">
          <button type="submit" class="btn-contratar">Confirmar Contrata√ß√£o</button>
        </form>

        <a href="/home" class="btn-voltar">
  <i data-lucide="arrow-left"></i> Voltar
</a>

      </div>
    </div>
  </main>

  <script>
    try{ if(window.lucide && lucide.createIcons) lucide.createIcons(); }catch(e){}

    // Dropdown do perfil (seguro)
    (function(){
      const perfilToggle = document.getElementById('perfil-toggle');
      const dropdown = document.getElementById('perfil-dropdown');
      if(!perfilToggle || !dropdown) return;

      perfilToggle.addEventListener('click', () => {
        dropdown.classList.toggle('mostrar');
        perfilToggle.classList.toggle('ativo');
      });

      document.addEventListener('click', (e) => {
        if (!e.target.closest('.perfil-area')) {
          dropdown.classList.remove('mostrar');
          perfilToggle.classList.remove('ativo');
        }
      });
    })();
  </script>
</body>
</html>
