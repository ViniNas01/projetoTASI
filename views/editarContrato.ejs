<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Editar Contrato - FacilitaA√≠</title>
  <link rel="stylesheet" href="/style/style.css" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <script src="https://unpkg.com/lucide@latest"></script>
</head>

<body class="home-body">

  <!-- Cabe√ßalho -->
  <header class="top-bar">
    <div class="logo">
      üõ†Ô∏è <span>FacilitaA√≠</span>
    </div>

    <div class="perfil-area">
      <div class="perfil" id="perfil-toggle">
        <i data-lucide="user"></i>
        <span><%= cliente.nome %></span>
        <i data-lucide="chevron-down" class="seta"></i>
      </div>

      <div class="dropdown" id="perfil-dropdown">
        <a href="/home">Home</a>
        <a href="/meus-servicos">Meus Servi√ßos</a>
        <a href="/logout">Sair</a>
      </div>
    </div>
  </header>

  <!-- Conte√∫do principal -->
  <main class="content" style="padding:40px 24px;">
    <section class="detalhes" style="max-width:900px;margin:0 auto;">
      <div class="card-editar">
        <h2>üõ†Ô∏è Editar Servi√ßo Contratado</h2>

        <form action="/contratos/<%= contrato.id %>/editar" method="POST" class="form-editar">
          <label>
            Profissional
            <input type="text" name="profissional_nome" value="<%= contrato.profissional_nome %>" required />
          </label>

          <label>
            Categoria
            <input type="text" name="categoria" value="<%= contrato.categoria %>" required />
          </label>

          <label>
            Status
            <select name="status">
              <option value="pendente" <%= contrato.status === 'pendente' ? 'selected' : '' %>>Pendente</option>
              <option value="confirmado" <%= contrato.status === 'confirmado' ? 'selected' : '' %>>Confirmado</option>
              <option value="concluido" <%= contrato.status === 'concluido' ? 'selected' : '' %>>Conclu√≠do</option>
              <option value="cancelado" <%= contrato.status === 'cancelado' ? 'selected' : '' %>>Cancelado</option>
            </select>
          </label>

          <div class="acoes-servico">
            <button type="submit" class="btn-contratar btn-amarelo">Salvar</button>
            <a href="/meus-servicos" class="btn-contratar btn-cinza">Cancelar</a>
          </div>
        </form>
      </div>
    </section>
  </main>

  <script>
    lucide.createIcons();

    // Dropdown do perfil
    const perfilToggle = document.getElementById('perfil-toggle');
    const dropdown = document.getElementById('perfil-dropdown');

    perfilToggle.addEventListener('click', () => {
      dropdown.classList.toggle('mostrar');
      perfilToggle.classList.toggle('ativo');
    });

    document.addEventListener('click', (e) => {
      if (!e.target.closest('.perfil-area')) {
        dropdown.classList.remove('mostrar');
        perfilToggle.classList.remove('ativo');
      }
    });
  </script>
</body>
</html>
